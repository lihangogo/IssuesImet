# VIM

### 模式
- 6种基本模式
    - 普通模式(Normal mode)
        ```
        - 可用编辑器命令
        - 移动光标、删除文本等
        - 默认模式
        - 按a(append)或i(insert)进入插入模式
        ```
    - 插入模式(Insert mode)
        ```
        - 大部分按键都会向文本缓冲中插入文本
        - ESC键回到普通模式
        ```
    - 可视化模式(Visual mode)
        ```
        - 普通模式按v进入
        - 用移动命令时会扩大高亮的文本区域
        - 用非移动命令时会执行到这块高亮区域上
        ```
    - 选择模式(Select mode)
        ```
        - 与windows无模式编辑器行为类似
        - 可用鼠标或光标选择高亮文本
        - 一旦输入任何字符的话，vim会用这个字符替换选择的高亮文本块
        ```
    - 命令行模式(Command line mode)
        ```
        - 如执行命令:键、/键、!键等
        - 命令执行后vim返回到之前模式
        ```
    - Ex模式(Ex mode)
        ```
        - 与命令行模式相似
        - 在使用:visual命令离开Ex模式前，可以一次执行多条命令
        ```
- 5种派生模式

### 常用功能
- 普通模式下h,j,k,l
    ```
    - h左、l右、j下、k上
    - w移动到下一个单词
    - b移动到上一个单词
    ```
- 进如插入模式
    ```
    i: 在当前光标处编辑
    I: 在行首插入
    A: 在行末插入
    a: 在光标后插入编辑
    o: 在当前行后插入一个新行
    O: 在当前行前插入一个新行
    cw: 替换从光标所在位置后到单词结尾字符
    ```
- 退出vim
    ```
    :w filename 另存为
    :saveas filename    另存为
    :x  保存并退出=:wq
    shift+zz    普通模式下保存退出vim
    ```
- 普通模式下删除文本
    ```
    x或del: 删除游标所在字符
    X:  删除游标所在前一个字符
    dd: 删除整行
    dw: 删除一个单词 从当前字母（不适用中文）
    daw:    删除一个单词 从单词开头（不适用中文）
    d$或D:  删除至行尾
    d^: 删除至行首
    dG: 删除至文档结尾
    d1G:    删除至文档首部
    命令前加数字表示删除多行如2dd
    ```
- 重复命令
    ```
    .小数点: 普通模式下会重复上一个命令 eg: x dd
    N<command>: 普通模式重复N次command eg 10x 3dd
    dnw: 删除n个单词
    ```
- 光标文档内跳转
    ```
    nG: 游标跳转到第n行，:set nu先显示行号
    gg: 游标跳到第一行
    G:  游标跳到最后一行
    ctrl+o: 快速回到上次光标位置
    ```
- 光标行内跳转
    ```
    w:  到下一个单词的开头
    e:  到当前单词结尾
    
    b:  到前一个单词的开头
    ge: 到前一个单词的结尾
    
    0或^:   到行头
    $:  到行尾
    
    f<字母>:    向后搜索<字母>并跳过去
    F<字母>:    向前搜索<字母>并跳过去
    ```
- 复制黏贴剪切
    ```
    #复制
    yy: 复制整行
    3yy:    复制3行
    
    y^或y0: 复制至行首
    y$: 复制至行尾
    
    yw: 复制一个单词
    yaw:    复制一整个单词
    y2w:    复制两个单词
    
    yG: 复制至文本末
    y1G:    复制至文本开头
    
    #黏贴
    p:  黏贴至光标后（下）
    P:  黏贴至光标前（上）
    
    #剪切
    dd: 剪切一行
    ddp:    快速交换光标行与下行
    ddP:    快速交换光标行与上行
    ```
- 字符替换撤销
    ```
    #普通模式下
    
    r+<待替换字母>: 将光标所在自摸替换为指定字母
    R:  连续替换光标字母以及之后字母，直到Esc
    
    cc: 替换整行字符，输入完按Esc退到普通模式
    cw: 替换一个单词，即删除一个单词并进入插入模式，从光标处起
    caw:    替换一个单词，从光标所在单词开头处替换
    C:  替换游标处到行尾的所有字母
    
    ~:  反转游标所在字母大小写
    u{n}:   撤销一次或n次操作
    U:  撤销当前行所有操作
    ```
-  快速缩进
    ```
    #普通模式下
    >>: 整行向右缩进
    <<: 整行向左缩进
    
    #命令行模式下
    :set shiftwidth?    获取当前缩进宽度
    :set shiftwidth=3   设置缩进宽度
    
    :ce 本行居中
    :ri 本行靠右
    :le 本行靠左
    ```
- 查找
    ```
    /<word>:    正向查找
    ?<word>:    反向查找
    
    \*: 向下寻找光标处单词
    \#: 向上寻找光标处单词
    
    g\*: 向下寻找光标处单词，部分匹配即可
    g\#: 向上寻找光标处单词，部分匹配即可
    
    n:  查找下一个
    N:  查找上一个
    ```

### 高级功能

- 多文件编辑
    ```
    vim 1.txt 2.txt 同时创建两个文件并编辑，默认进1.txt编辑界面
    
    :n  切换到下一个（2.txt）进行编辑
    :n! 强制切换，保存改动
    :N  切换到上一个（1.txt）进行编辑
    :N! 强制切换，保存改动
    
    :e 3.txt 打开新文件3.txt
    :e# 回到前一个文件
    :ls可以列出以前编辑过的文档
    
    :b 2.txt（或者编号）可以直接进入文件2.txt编辑
    :bd 2.txt（或者编号）可以删除以前编辑过的列表中的文件项目
    :e! 4.txt，新打开文件4.txt，放弃正在编辑的文件

    :f 显示正在编辑的文件名
    :f new.txt，改变正在编辑的文件名字为new.txt
    
    #断电没保存恢复
    vim -r 1.txt
    :ewcover 1.txt
    ```
- 可视模式visual
    ```
    #普通模式下
    v:  进入字符选择模式，光标走过之地就会选取，再次按v取消选取
    shift+v:    进入行选择模式，按V后悔选择整行，上下移光标选更多行，再次按V取消选择
    ctrl+v: 进去区域选择模式，可进行矩阵区域选择，再按取消选取（常用语整列选择，如选中一列按x删掉注释的#）
    
    #可视模式下
    d:  删除选取区域内容
    y:  复制选取区域内容
    ```
- 视窗操作
    ```
    :new    打开一个新的视窗
    
    :sp 1.txt 水平打开新的视窗编辑1.txt
    :vsp 2.txt 垂直打开新的视窗编辑1.txt
    
    ctrl+w视窗操作查资料
    ```
- 文档加密
    ```
    vim -x file1
    ```
- 在vim执行外部命令
    ```
    :!<command> 可以在vim中执行外部shell命令，如:!ls
    ```
- 帮助系统
    ```
    F1 打开vim自己的帮助文档
    :h shiftwidth   代开shiftwidth帮助文档
    :ver    显示版本及参数
    ```
- 功能设定
    ```
    #vim中设定功能在退出vim后不会保存，如需保存需修改vim配置文件~/.vimrc
    
    :set all 显示所有设定值
    :set <option>?  显示某个option设定值
    
    :set autoindent(ai) 设置自动缩进
    :set autowrite(aw)  设置自动存档，默认未打开
    :set background=dark或light 设置背景风格
    :set backup(bk) 设置自动备份，默认未打开
    :set cindent(cin)   设置C语言风格缩进
    更多参考vim手册
    ```
    
    
    
    
    
    
    
    
    
    
    
    
    
    