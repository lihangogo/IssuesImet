# 常用系统搭建配置

> **作者：liy**

## Hadoop系统搭建
#### 为分布式部署
1. 安装java
2. 配置ssh免密登录localhost

```
sudo apt-get install ssh
ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

ssh localhost
```

3. tar xzf hadoop.tar.gz
4. 配置HADOOP_HOME、PATH在~/.bashrc或/etc/profile中
    
```
export HADOOP_HOME=/home/club/hadoop-2.7.6
export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin
```
5. hadoop version验证
6. 配置site.xml文件
- core.xml

```
<configuration>
  <property>
    <name>fs.defaultFS</name>
    <value>hdfs://localhost</value>
  </property>
</configuration>

```

- hdfs-site.xml

```
<configuration>
  <property>
    <name>dfs.replication</name>
    <value>1</value>
  </property>
</configuration>

```

- mapred-site.xml

```
<configuration>
  <property>
    <name>mapreduce.framework.name</name>
    <value>yarn</value>
  </property>
</configuration>
```

- yarn-site.xml

```
<configuration>

<!-- Site specific YARN configuration properties -->
  <property>
    <name>yarn.resourcemanager.hostname</name>
    <value>localhost</value>
  </property>
  <property>
    <name>yarn.nodemanager.aux-services</name>
    <value>mapreduce_shuffle</value>
  </property>
</configuration>

```
7. 启动守护进程

```
start-dfs.sh
start-yarn.sh
mr-jobhistory-daemon.sh start historyserver
```
> 注意：启动时如果说JAVA_HOME is not set，则需要配置hadoop-env.sh中的JAVA_HOME

8. 查看

```
jps
11200 SecondaryNameNode
11714 NodeManager
11015 DataNode
11591 ResourceManager
14697 Jps
10859 NameNode
12076 JobHistoryServer

http://localhost:50070
http://localhost:8088
http://localhost:19888
```
